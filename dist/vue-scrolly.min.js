!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Scrolly={})}(this,function(e){"use strict";function t(){if(!x){x=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),n=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(m=/\b(iPhone|iP[ao]d)/.exec(e),v=/\b(iP[ao]d)/.exec(e),p=/Android/i.exec(e),y=/FBAN\/\w+;/i.exec(e),w=/Mobile/i.exec(e),h=!!/Win64/.exec(e),t){(i=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN)&&document&&document.documentMode&&(i=document.documentMode);var o=/(?:Trident\/(\d+.\d+))/.exec(e);c=o?parseFloat(o[1])+4:i,r=t[2]?parseFloat(t[2]):NaN,a=t[3]?parseFloat(t[3]):NaN,(s=t[4]?parseFloat(t[4]):NaN)?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),l=t&&t[1]?parseFloat(t[1]):NaN):l=NaN}else i=r=a=l=s=NaN;if(n){if(n[1]){var b=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);d=!b||parseFloat(b[1].replace("_","."))}else d=!1;u=!!n[2],f=!!n[3]}else d=u=f=!1}}function n(e){var t=0,n=0,o=0,i=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),o=t*D,i=n*D,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(o=e.deltaX),(o||i)&&e.deltaMode&&(1==e.deltaMode?(o*=L,i*=L):(o*=O,i*=O)),o&&!t&&(t=o<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:t,spinY:n,pixelX:o,pixelY:i}}function o(e){return 100*e+"%"}var i,r,a,s,l,c,d,u,f,p,h,m,v,y,w,b,x=!1,g={ie:function(){return t()||i},ieCompatibilityMode:function(){return t()||c>i},ie64:function(){return g.ie()&&h},firefox:function(){return t()||r},opera:function(){return t()||a},webkit:function(){return t()||s},safari:function(){return g.webkit()},chrome:function(){return t()||l},windows:function(){return t()||u},osx:function(){return t()||d},linux:function(){return t()||f},iphone:function(){return t()||m},mobile:function(){return t()||m||v||p||w},nativeApp:function(){return t()||y},android:function(){return t()||p},ipad:function(){return t()||v}},E=g,M=!("undefined"==typeof window||!window.document||!window.document.createElement),S={canUseDOM:M,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:M&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:M&&!!window.screen,isInWorker:!M};S.canUseDOM&&(b=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""));var N=function(e,t){if(!S.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,o=n in document;if(!o){var i=document.createElement("div");i.setAttribute(n,"return;"),o="function"==typeof i[n]}return!o&&b&&"wheel"===e&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o},D=10,L=40,O=800;n.getEventType=function(){return E.firefox()?"DOMMouseScroll":N("wheel")?"wheel":"mousewheel"};var T=n;try{var W=Object.defineProperty({},"passive",{get:function(){supportsPassive=!0}});window.addEventListener("test",null,W)}catch(e){}var F="MutationObserver"in window,X="mousemove",_="mouseup",k={name:"scrolly",props:{classname:{type:String,default:""}},data:function(){return{container:null,viewport:null,barX:null,barY:null,onMouseWheelHandler:null,onDomChangeHandler:null,mutationObserver:null,isScrolling:!1}},computed:{classnames:function(){return["scrolly",this.isScrolling?"is-scrolling":"",this.classname]}},mounted:function(){this.$nextTick(function(){var e,t,n,o=this.$el;if([].concat(o.childNodes).forEach(function(o){var i=o.className;void 0===i&&(i=""),i.match("scrolly-viewport")&&(e=o),i.match("axis-x")&&(t=o),i.match("axis-y")&&(n=o)}),e&&(t||n)){var i=this.onMouseWheel.bind(this);o.addEventListener("wheel",i,!1);var r,a=this.onDomChange.bind(this);F?(r=new MutationObserver(a)).observe(e,{childList:!0,characterData:!0,subtree:!0,attributes:!0}):(e.addEventListener("DOMSubtreeModified",a),e.addEventListener("propertychange",a)),Object.assign(this,{container:o,viewport:e,barX:t,barY:n,onMouseWheelHandler:i,onDomChangeHandler:a,mutationObserver:r})}})},methods:{onMouseEnter:function(){this.refreshScrollLayout()},onMouseDown:function(e){function t(e){e.preventDefault();var t=e.pageX,n=e.pageY;if(f){var s=c.scrollWidth,l=c.offsetWidth,d=l-i.offsetWidth,u=m+(t-r);u<0&&(u=0),u>d&&(u=d),i.style.left=o(u/l),c.scrollLeft=u/d*(s-l)}if(p){var v=c.scrollHeight,y=c.offsetHeight,w=y-i.offsetHeight,b=h+(n-a);b<0&&(b=0),b>w&&(b=w),i.style.top=o(b/y),c.scrollTop=b/w*(v-y)}}function n(){l.isScrolling=!1,u(_,n),u(X,t)}var i=e.target,r=e.pageX,a=e.pageY,s=i.className;if(s.match("scrolly-bar")){var l=this,c=this.viewport,d=window.addEventListener,u=window.removeEventListener,f=s.match("axis-x"),p=s.match("axis-y"),h=i.offsetTop,m=i.offsetLeft;l.isScrolling=!0,d("mousemove",t),d("mouseup",n)}},onMouseWheel:function(e){var t=T(e),n=t.pixelX,o=t.pixelY;(this.barX&&0!==n||this.barY&&0!==o)&&e.preventDefault(),this.refreshScrollLayout(n,o)},onDomChange:function(e,t,n){t||(t=250);var o,i;return function(){var r=n||this,a=+new Date,s=arguments;o&&a<o+t?(clearTimeout(i),i=setTimeout(function(){o=a,e.apply(r,s)},t)):(o=a,e.apply(r,s))}}(function(){this.refreshScrollLayout()},250),refreshScrollLayout:function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this,i=n.viewport,r=n.barX,a=n.barY;if(r){i.scrollLeft+=e;var s=i.scrollLeft,l=i.scrollWidth,c=i.offsetWidth,d=r.style;d.visibility="hidden",d.display="block",d.width=o(c/l);var u=r.offsetWidth,f=c-u,p=s/(l-c)*f;p<0&&(p=0),p>f&&(p=f),d.left=o(p/c),d.display=u<c?"block":"none",d.visibility="visible"}if(a){i.scrollTop+=t;var h=i.scrollTop,m=i.scrollHeight,v=i.offsetHeight,y=a.style;y.visibility="hidden",y.display="block",y.height=o(v/m);var w=a.offsetHeight,b=v-w,x=h/(m-v)*b;x<0&&(x=0),x>b&&(x=b),y.top=o(x/v),y.display=w<v?"block":"none",y.visibility="visible"}}},beforeDestroy:function(){var e=this,t=e.container,n=e.viewport,o=e.onMouseWheelHandler,i=e.onDomChangeHandler,r=e.mutationObserver;r&&r.disconnect(),F||(n.removeEventListener("DOMSubtreeModified",i),n.removeEventListener("propertychange",i)),t.removeEventListener("wheel",o)}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),n='.scrolly { position: relative; } .scrolly .scrolly-bar { opacity: 0; } .scrolly:hover .scrolly-bar, .scrolly.is-scrolling .scrolly-bar { opacity: 1; } .scrolly-viewport { position: absolute; overflow: hidden; width: 100%; height: 100%; z-index: 1; } .scrolly-bar { position: absolute; border: 7px solid transparent; cursor: pointer; z-index: 2; transition: opacity .1s ease; } .scrolly-bar:before { position: absolute; width: 100%; height: 100%; content: " "; background: rgba(0, 0, 0, 0.3); border-radius: 7px; transition: background .2s ease; } .scrolly-bar:hover:before { background: rgba(0, 0, 0, 0.6); } .scrolly-bar.axis-x { left: 0; bottom: 0; width: 100%; height: 21px; min-width: 20%; max-width: 100%; } .scrolly-bar.axis-y { top: 0; right: 0; width: 21px; height: 100%; min-height: 20%; max-height: 100%; } ';t.type="text/css",t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n)),e.appendChild(t)}}();var C=Object.assign(k,{render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:e.classnames,on:{mouseenter:e.onMouseEnter,mousedown:e.onMouseDown}},[e._t("default")],2)},staticRenderFns:[]});C.prototype=k.prototype,function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var H={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:e.classnames},[e._t("default")],2)},staticRenderFns:[],name:"scrolly-viewport",props:{classname:{type:String,default:""}},computed:{classnames:function(){return["scrolly-viewport",this.classname]}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var Y={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:e.classnames},[e._t("default")],2)},staticRenderFns:[],name:"scrolly-bar",props:{axis:{type:String,default:"y"},classname:{type:String,default:""}},computed:{classnames:function(){return["scrolly-bar","axis-"+this.axis,this.classname]}}};"undefined"!=typeof window&&window.Vue&&(window.Vue.component("scrolly",C),window.Vue.component("scrolly-viewport",H),window.Vue.component("scrolly-bar",Y)),e.Scrolly=C,e.ScrollyViewport=H,e.ScrollyBar=Y,Object.defineProperty(e,"__esModule",{value:!0})});
